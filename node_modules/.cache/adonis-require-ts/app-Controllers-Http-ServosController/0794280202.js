"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Cervo_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Cervo"));
const mongoose_1 = __importDefault(require("mongoose"));
class ServosController {
    async cambiarStatus({ request, response }) {
        const value = request.input('value');
        const Date = new Date();
        try {
            await mongoose_1.default.connect('mongodb://18.220.12.4:27017/Sensores?readPreference=primary&directConnection=true&ssl=false');
            response = await Cervo_1.default.Cervos.updateOne({ "id": 1 }, { $set: { "value": value, "updated_at": Date } });
            return response;
        }
        catch {
            await mongoose_1.default.connect('mongodb://18.220.12.4:27017/Sensores?readPreference=primary&directConnection=true&ssl=false');
            response = await Cervo_1.default.Cervos.updateOne({ "id": 1 }, { $set: { "value": value, "updated_at": Date } });
            return response;
        }
    }
}
exports.default = ServosController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2Vydm9zQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlNlcnZvc0NvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxtRkFBc0M7QUFFdEMsd0RBQWdDO0FBQ2hDLE1BQXFCLGdCQUFnQjtJQUUxQixLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUMsT0FBTyxFQUFDLFFBQVEsRUFBQztRQUV6QyxNQUFNLEtBQUssR0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ2xDLE1BQU0sSUFBSSxHQUFDLElBQUksSUFBSSxFQUFFLENBQUE7UUFDckIsSUFDQTtZQUNBLE1BQU0sa0JBQVEsQ0FBQyxPQUFPLENBQUMsNkZBQTZGLENBQUMsQ0FBQTtZQUNySCxRQUFRLEdBQUUsTUFBTSxlQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFDLElBQUksRUFBQyxDQUFDLEVBQUMsRUFBQyxFQUFDLElBQUksRUFBQyxFQUFDLE9BQU8sRUFBQyxLQUFLLEVBQUMsWUFBWSxFQUFDLElBQUksRUFBQyxFQUFDLENBQUMsQ0FBQTtZQUMxRixPQUFPLFFBQVEsQ0FBQTtTQUNkO1FBQ0QsTUFDQTtZQUNJLE1BQU0sa0JBQVEsQ0FBQyxPQUFPLENBQUMsNkZBQTZGLENBQUMsQ0FBQTtZQUNySCxRQUFRLEdBQUUsTUFBTSxlQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFDLElBQUksRUFBQyxDQUFDLEVBQUMsRUFBQyxFQUFDLElBQUksRUFBQyxFQUFDLE9BQU8sRUFBQyxLQUFLLEVBQUMsWUFBWSxFQUFDLElBQUksRUFBQyxFQUFDLENBQUMsQ0FBQTtZQUMxRixPQUFPLFFBQVEsQ0FBQTtTQUNsQjtJQUNMLENBQUM7Q0FDSjtBQW5CRCxtQ0FtQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgdHlwZSB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuaW1wb3J0IENlcnZvcyBmcm9tIFwiQXBwL01vZGVscy9DZXJ2b1wiO1xuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tIFwibHV4b25cIjtcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlcnZvc0NvbnRyb2xsZXIgXG57XG4gICAgcHVibGljIGFzeW5jIGNhbWJpYXJTdGF0dXMoe3JlcXVlc3QscmVzcG9uc2V9KVxuICAgIHtcbiAgICAgICAgY29uc3QgdmFsdWU9cmVxdWVzdC5pbnB1dCgndmFsdWUnKVxuICAgICAgICBjb25zdCBEYXRlPW5ldyBEYXRlKClcbiAgICAgICAgdHJ5XG4gICAgICAgIHtcbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdCgnbW9uZ29kYjovLzE4LjIyMC4xMi40OjI3MDE3L1NlbnNvcmVzP3JlYWRQcmVmZXJlbmNlPXByaW1hcnkmZGlyZWN0Q29ubmVjdGlvbj10cnVlJnNzbD1mYWxzZScpXG4gICAgICAgIHJlc3BvbnNlPSBhd2FpdCBDZXJ2b3MuQ2Vydm9zLnVwZGF0ZU9uZSh7XCJpZFwiOjF9LHskc2V0OntcInZhbHVlXCI6dmFsdWUsXCJ1cGRhdGVkX2F0XCI6RGF0ZX19KVxuICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfVxuICAgICAgICBjYXRjaFxuICAgICAgICB7XG4gICAgICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vMTguMjIwLjEyLjQ6MjcwMTcvU2Vuc29yZXM/cmVhZFByZWZlcmVuY2U9cHJpbWFyeSZkaXJlY3RDb25uZWN0aW9uPXRydWUmc3NsPWZhbHNlJylcbiAgICAgICAgICAgIHJlc3BvbnNlPSBhd2FpdCBDZXJ2b3MuQ2Vydm9zLnVwZGF0ZU9uZSh7XCJpZFwiOjF9LHskc2V0OntcInZhbHVlXCI6dmFsdWUsXCJ1cGRhdGVkX2F0XCI6RGF0ZX19KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=